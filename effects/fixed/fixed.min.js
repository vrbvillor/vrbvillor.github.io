function CHIfixed(e,b,h){e&&(b||(b="top"),h||(h={}),$.fn.int=function(b){return parseInt(this.css(b))||0},$.fn.inside=function(b){return 0<this.closest(b).size()},b=b.toLowerCase(),0>$.inArray(b,"top bottom left right horizontal vertical".split(" "))&&(b="top"),$(e).map(function(e,a){var c={},d;for(d in h)c[d]=$(a).css(d);d=$(a).offset();c={css:c};if("top"==b||"vertical"==b)c.topLimit=d.top-$(a).int("marginTop");if("bottom"==b||"vertical"==b)c.bottomLimit=d.top+$(a).outerHeight()+$(a).int("marginBottom")-
$(window).height();if("left"==b||"horizontal"==b)c.leftLimit=d.left-$(a).int("marginLeft");if("right"==b||"horizontal"==b)c.rightLimit=d.left+$(a).outerWidth()+$(a).int("marginRight")-$(window).width();$(a).data(c);c=$("<"+a.tagName+">");d=$("<"+a.tagName+">");c.width($(a).outerWidth()).height($(a).outerHeight()).hide().insertAfter($(a)).css({marginLeft:$(a).css("marginLeft"),marginRight:$(a).css("marginRight"),marginTop:$(a).css("marginTop"),marginBottom:$(a).css("marginBottom"),visibility:"hidden",
float:$(a).css("float"),clear:$(a).css("clear"),position:$(a).css("position"),left:$(a).css("left"),top:$(a).css("top"),right:$(a).css("right"),bottom:$(a).css("bottom")});var p=0<=$.inArray(b,["top","bottom","vertical"])?{left:$(a).offset().left-$(a).int("marginLeft")}:{top:$(a).offset().top-$(a).int("marginTop")};d.width($(a).outerWidth(!0)).height($(a).outerHeight(!0)).addClass("fixed").appendTo("body").css(p);$(window).on("scroll load",function(){for(var b=$(a),c=$(window).scrollLeft(),d=$(window).scrollTop(),
k=b.data("fixer"),e=b.data("placer"),n=["top","bottom","left","right"],m=0;m<n.length;m++){var l=n[m],g,f=b.data(l+"Limit");switch(l){case "top":g=d>f;break;case "left":g=c>f;break;case "right":g=c<f;break;case "bottom":g=d<f}f=b.inside(k);if(g&&!f){c=l;e.show();b.css(h);k.append(b).addClass("fixed-"+c).show();break}else if(!g&&f&&k.hasClass("fixed-"+l)){e.hide();b.insertBefore(e).css(b.data("css"));k.hide().removeClass("fixed-top fixed-bottom fixed-left fixed-right");break}}});$(a).data({placer:c,
fixer:d})}))};