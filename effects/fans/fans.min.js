function CHIfans(c,k,b,l){function x(a){return a&&/^[\+]?[0]*[1-9][\d]*$/.test(a)}if(c&&$(c).size()){b||(b={});l||(l={});var q="relax"in b?b.relax:!0,r=q?"mouseenter":"click";c=$(c).eq(0);var d=k?c.find(k):c.children(),a={},e=d.size();if(e){k=d.eq(0).outerWidth();for(var t=c.width(),m=0,f=0,g=0,h=0;h<e;h++){var u=d.eq(h);u.data({bx:h?(t-k)/(e-1)*(h-1)+k:0,ax:(t-k)/(e-1)*h,rx:t/e*h});u.get(0).timer=0;u[r](function(){clearTimeout(m);d.finish();a.show($(this).index())})}a.show=function(a){if(!g){g=d.size();
d.eq(a).addClass("cur");for(var b=0;b<e;b++){var c=d.eq(b).stop();c.animate({left:c.data(a<b?"bx":"ax")},function(){g--;a==b&&(l.show?l.show.call(this,a):l.hide&&l.hide.call(this,$(this).index()));g||!n||q||v||(m=0,on())});f=a}d.eq(a).siblings().removeClass("cur")}};a.relax=function(){d.removeClass("cur").map(function(a,b){$(b).animate({left:$(b).data("rx")})})};if(q)a.relax(),c.mouseleave(a.relax);else{var p=function(){clearTimeout(m);m=0},w=function(){g||m||(m=setTimeout(a.next,y))};a.show(0);var y=
x(b.delay)?b.delay:3E3,r="mstop"in b?Boolean(b.mstop):!0,n="auto"in b?b.auto:!0,v=0;a.start=function(){n=!0;w()};a.stop=function(){n=!1;p()};a.next=function(){g||(p(),f=(f+1)%e,a.show(f))};a.prev=function(){g||(p(),f=(f-1+e)%e,a.show(f))};r&&c.mouseleave(function(){v=!1;n&&w()}).mouseenter(function(){p();v=!0});n&&a.start()}return a}}};