<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>像素字幕效果</title>
<link rel="stylesheet" type="text/css" href="css.css">
</head>

<body>
<div id="Canvas"></div>
</body>
</html>
<script src="../libs/jquery-2.1.3.min.js"></script>
<script src="../libs/raphael2.2.0.min.js"></script>
<script src="math.js"></script>
<script src="pixels.js"></script>

<script>
var colors='#1B58B8,#2673EC,#AE113D,#632F00,#2E1700,#E56C19,#FF2E12,#000000,#004D60,#199900,#004A00,#00C13F,#B81B1B,#91D100,#83BA1F,#E1B700,#D39D09,#FF76BC,#2D004E,#4617B4,#1F0068,#FF1D77,#B81B6C,#AA40FF,#E064B7,#00A4A4,#FF7D23,#696969,#FFFFFF,#56C5FF,#569CE3,#00D8C0,#00AAAA,#B01E00,#4E0000,#4E0038,#C1004F,#7200AC,#15992A,#FF981D,#252525,#F4B300,#78BA00,#006AC1,#001E4E,#008287,#691BB8,#1FAEFF'.split(',');

//var GlobalUnit=40;
//var GlobalWidth=800;
//var GlobalHeight=600;
var colors='#252525,#F4B300,#78BA00,#006AC1,#001E4E,#008287,#691BB8,#1FAEFF,#1B58B8,#2673EC,#AE113D,#632F00,#2E1700,#004D60,#199900,#004A00,#00C13F,#56C5FF,#569CE3,#00D8C0,#00AAAA,#B01E00,#4E0000,#4E0038,#C1004F,#7200AC,#15992A,#FF981D,#E56C19,#FF2E12,#B81B1B,#91D100,#83BA1F,#E1B700,#D39D09,#FF76BC,#2D004E,#4617B4,#1F0068,#FF1D77,#B81B6C,#AA40FF,#E064B7,#00A4A4,#FF7D23,#696969,#FFFFFF,#000000'.split(',');
var scenes=[{datas:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,40,40,40,40,40,,,,,,,,,,,,,,,40,,,,,,,,,,,,,,,40,,,,,,,,,,,,,,,,,,,,,,,,,,,40,40,40,,,,,,,40,40,,,,40,,,,40,,,,,40,40,40,40,,,,40,40,40,,,,,,,40,40,40,40,,,,,,,,,,,40,40,40,40,,,40,40,40,40,,,,,,,40,40,,,,,,,,40,,,,,,,,,,,40,40,40,40,,,,,,,,,,,,,,,,,,,,,,,,,,,40,40,40,40,40,,,,,,,,,,,40,,40,,40,,,,,,,,,,,40,,,,40,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,",CanvasColor:35,ScreenColor:30,ActionMode:"t"},{datas:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,47,47,47,47,47,,,,,,47,,,,,,,47,,,,,,,,47,,,,,47,47,47,47,47,,,,47,47,47,47,47,,,,,,,,,,,,,47,,,,,,47,47,47,47,,,,,,47,,,,,47,,,47,,,,,,,47,,,,,,47,47,47,47,,,,,,47,,,,,,,,,,,,,,,47,,,,,47,,,,,,,,,,47,,,,,47,47,47,47,47,,,,47,,47,,47,,,47,,,,,,,,,47,47,47,,,,,,,,,,,,,,47,,,,,47,47,47,47,47,,,,,,,,,,,47,,47,,47,,,,,,,,,,,47,,,,47,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,",CanvasColor:45,ScreenColor:0,ActionMode:"lb"},{datas:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,8,8,8,,8,,,,,,,,,,,8,,8,,8,,,,,,8,8,,,,8,,8,8,8,,,,,8,,,8,,,,,,,,,,,,8,,,8,,,,8,8,8,8,,,,,,8,8,8,,,8,,,8,,,,,8,8,,,8,,,,8,8,8,8,,,,8,,,,8,,,,,,,,,,,,8,8,8,,,,8,8,8,8,8,,,,,,,,,,,8,,,,8,,,,,,,,,,,,8,8,8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,",CanvasColor:9,ScreenColor:4,ActionMode:"lt"},{datas:",,,,,,,,,,,,,,,,,,,,,,,29,29,29,29,29,,,,,,,,,,,,,29,,,,,,,,,,,,,29,29,29,29,29,,,,,,,,,,,,,,,,,,,,,29,,,,,,29,29,29,29,,,,,,,,,,,29,,,29,,,,,33,29,,29,,,,,29,29,29,29,,,,,,,,29,,,,,,,,,,,,,,,29,,,29,29,29,29,29,,,,,,,,29,,,29,,,29,,,,,,29,,29,,,,,29,29,,,,,,,,,,,,,,,,,,,,,,,29,,,,,29,29,29,29,29,,,,,,,,,,,29,,,29,,,,,,,,,,,,,29,29,,,,,,,,,,,,,,,,,,,,,,,,,,,,29,29,29,,,,,,,,,,,,,,,,29,29,,,,,,,,,,,29,29,29,,,,",CanvasColor:33,ScreenColor:11,ActionMode:"m-tb"}],orders=[0,2,1,3],GlobalWidth=800,GlobalHeight=600,GlobalUnit=40;

var w=GlobalWidth/GlobalUnit,h=GlobalHeight/GlobalUnit,
	pixels=[],num=0,action=0;//变量锁
$(function(){
	paper=Raphael('Canvas',GlobalWidth,GlobalHeight);
	for(var i=0;i<w;i++)
	{
		pixels[i]=[];
		for(var j=0;j<h;j++)
		{
			pixels[i][j]=paper.square(0,false).attr({
				stroke:false,
				fill:'#fff',
				transform:'T'+(i*GlobalUnit)+','+(j*GlobalUnit)
			}).data({i:i,j:j});
		}
	}
	FlipPixels(num);
})

</script>